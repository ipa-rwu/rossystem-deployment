<?xml version="1.0"?>
<launch>

  <node pkg="jackal_base" type="jackal_node" name="jackal_node" cwd="node" respawn="false" output="screen">
    <param name="require/publishers" value="[status,feedback,imu/data_raw,navsat/nmea_sentence]" />
    <param name="require/subscribers" value="[cmd_drive,wifi_connected]" />
    <param name="wireless_interface" value="wlp2s0" />
    <param name="port" value="/dev/jackal" />
  </node>

  <node pkg="nmea_navsat_driver" type="nmea_topic_driver" name="nmea_topic_driver" ns="navsat" cwd="node" respawn="false" output="screen">
  </node>

  <node pkg="rosserial_python" type="message_info_service" name="rosserial_message_info" cwd="node" respawn="false" output="screen">
  </node>

  <node pkg="controller_manager" type="spawner" name="controller_spawner" cwd="node" respawn="false" output="screen">
    <param name="/jackal_joint_publisher/publish_rate" value="50" />
    <param name="/jackal_joint_publisher/type" value="joint_state_controller/JointStateController" />
    <param name="/jackal_velocity_controller/publish_rate" value="50" />
    <param name="/jackal_velocity_controller/type" value="diff_drive_controller/DiffDriveController" />
    <param name="/jackal_velocity_controller/left_wheel" value="[front_left_wheel,rear_left_wheel]" />
    <param name="/jackal_velocity_controller/right_wheel" value="[front_right_wheel,rear_right_wheel]" />
    <param name="/jackal_velocity_controller/pose_covariance_diagonal" value="[0.001,0.001,1000000.0,1000000.0,1000000.0,0.03]" />
    <param name="/jackal_velocity_controller/twist_covariance_diagonal" value="[0.001,0.001,0.001,1000000.0,1000000.0,0.03]" />
    <param name="/jackal_velocity_controller/cmd_vel_timeout" value="0.25" />
    <param name="/jackal_velocity_controller/k_l" value="0.1" />
    <param name="/jackal_velocity_controller/k_r" value="0.1" />
    <param name="/jackal_velocity_controller/enable_odom_tf" value="false" />
    <param name="/jackal_velocity_controller/wheel_separation_multiplier" value="1.5" />
    <param name="/jackal_velocity_controller/wheel_radius_multiplier" value="1.0" />
    <rosparam>
    /jackal_velocity_controller/linear/x:
      has_velocity_limits: true
      max_velocity: 2.0
      has_acceleration_limits: true
      max_acceleration: 20.0
    </rosparam>
    <rosparam>
    /jackal_velocity_controller/angular/z:
      has_velocity_limits: true
      max_velocity: 4.0
      has_acceleration_limits: true
      max_acceleration: 25.0
    </rosparam>
  </node>

</launch>
